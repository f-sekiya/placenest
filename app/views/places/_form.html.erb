<%= form_with model: place, local: true, class: form_class do |f| %>
  <%= f.hidden_field :parent_id, value: parent_id %>
  <%= hidden_field_tag :return_place_id, parent_id %>

  <% if variant == :inline %>
    <div class="place-inline-form__row">
      <%= f.text_field :name, placeholder: "Place名（必須）", autofocus: true, class: "input" %>
      <%= f.submit(place.persisted? ? "更新" : "追加", class: "btn btn--primary") %>

      <%= link_to "キャンセル",
                  new_button_places_path(parent_id: parent_id),
                  data: { turbo_frame: "place_new" },
                  class: "btn btn--ghost" %>
    </div>

    <% if place.errors.any? %>
      <p class="place-inline-form__error"><%= place.errors.full_messages.to_sentence %></p>
    <% end %>

    <div class="place-inline-form__row">
      <%= f.text_area :description, placeholder: "メモ（任意）", rows: 2, class: "input" %>
    </div>
  <% else %>
    <div class="place-add__row">
      <%= f.text_field :name, placeholder: "Place名（必須）", required: true, class: "input" %>
      <%= f.text_area :description, placeholder: "メモ（任意）", rows: 2, class: "input" %>

      <%= button_tag "子に追加",
                    type: "submit",
                    name: "place_scope",
                    value: "child",
                    class: "btn btn--primary" %>

      <%= button_tag "ルートに追加",
                    type: "submit",
                    name: "place_scope",
                    value: "root",
                    class: "btn btn--ghost" %>
    </div>

    <% if place.errors.any? %>
      <p class="place-add__error"><%= place.errors.full_messages.to_sentence %></p>
    <% end %>
  <% end %>
<% end %>
